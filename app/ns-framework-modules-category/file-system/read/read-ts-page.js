"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var observable_1 = require("tns-core-modules/data/observable");
var observable_array_1 = require("tns-core-modules/data/observable-array");
var file_system_1 = require("tns-core-modules/file-system");
var image_source_1 = require("tns-core-modules/image-source");
function onNavigatingTo(args) {
    var page = args.object;
    var vm = new observable_1.Observable();
    var array = new observable_array_1.ObservableArray();
    var folderName = "NativeScript";
    var fileName = "README.txt";
    var fileTextContent = "Build amazing iOS and Android apps with technology you already know" +
        "Open source framework for building truly native mobile apps" +
        "with Angular, TypeScript or JavaScript.";
    var documents = file_system_1.knownFolders.documents();
    var folder = documents.getFolder(folderName);
    var file = folder.getFile(fileName);
    file.writeText(fileTextContent)
        .then(function () {
        file.readText()
            .then(function (res) {
            vm.set("writtenContent", res);
        }).catch(function (err) {
            console.log(err.stack);
        });
    }).catch(function (err) {
        console.log(err);
    });
    documents = file_system_1.knownFolders.documents();
    documents.getEntities()
        .then(function (entities) {
        entities.forEach(function (entity) {
            array.push({
                name: entity.name,
                path: entity.path,
                lastModified: entity.lastModified.toString()
            });
        });
    }).catch(function (err) {
        console.log(err.stack);
    });
    documents = file_system_1.knownFolders.documents();
    var filePath = file_system_1.path.join(documents.path, "Text.txt");
    var exists = file_system_1.File.exists(filePath);
    console.log("Does Text.txt exists: " + exists);
    var temp = file_system_1.knownFolders.temp();
    var tempExists = file_system_1.Folder.exists(temp.path);
    console.log("Does temp folder exists: " + tempExists);
    vm.set("filePath", file.path);
    vm.set("folderEntities", array);
    vm.set("binarySource", "");
    page.bindingContext = vm;
}
exports.onNavigatingTo = onNavigatingTo;
function onReadSync(args) {
    var page = args.object.page;
    var vm = page.bindingContext;
    var image = image_source_1.fromResource("icon");
    var folder = file_system_1.knownFolders.documents();
    var filePath = file_system_1.path.join(folder.path, "Test.png");
    var saved = image.saveToFile(filePath, "png");
    if (saved) {
        var imageFile = file_system_1.File.fromPath(filePath);
        var binarySource = imageFile.readSync(function (err) {
            console.log(err);
        });
        console.log(this.binarySource);
        imageFile.writeSync(binarySource, function (err) {
            console.log(err);
        });
        vm.set("binarySource", "Successfully read binary data: " + binarySource);
    }
}
exports.onReadSync = onReadSync;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhZC10cy1wYWdlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmVhZC10cy1wYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0RBQThEO0FBQzlELDJFQUF5RTtBQUN6RSw0REFBZ0Y7QUFDaEYsOERBQTBFO0FBRzFFLHdCQUErQixJQUFJO0lBQy9CLElBQU0sSUFBSSxHQUFlLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckMsSUFBTSxFQUFFLEdBQUcsSUFBSSx1QkFBVSxFQUFFLENBQUM7SUFDNUIsSUFBTSxLQUFLLEdBQUcsSUFBSSxrQ0FBZSxFQUFFLENBQUM7SUFDcEMsSUFBTSxVQUFVLEdBQVcsY0FBYyxDQUFDO0lBQzFDLElBQU0sUUFBUSxHQUFXLFlBQVksQ0FBQztJQUN0QyxJQUFNLGVBQWUsR0FBVyxxRUFBcUU7UUFDakcsNkRBQTZEO1FBQzdELHlDQUF5QyxDQUFDO0lBRTlDLElBQUksU0FBUyxHQUFXLDBCQUFZLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDakQsSUFBTSxNQUFNLEdBQVcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUN2RCxJQUFNLElBQUksR0FBUyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTVDLElBQUksQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDO1NBQzFCLElBQUksQ0FBQztRQUVGLElBQUksQ0FBQyxRQUFRLEVBQUU7YUFDVixJQUFJLENBQUMsVUFBQyxHQUFHO1lBQ04sRUFBRSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNsQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBQyxHQUFHO1lBQ1QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDM0IsQ0FBQyxDQUFDLENBQUM7SUFFWCxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBQyxHQUFHO1FBQ1QsT0FBTyxD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QyxHQUFHLENBQUMsY0FBYyxFQUFFLG9DQUFrQyxZQUFjLENBQUMsQ0FBQztJQUM3RSxDQUFDO0FBQ0wsQ0FBQztBQXZCRCxnQ0F1QkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvZGF0YS9vYnNlcnZhYmxlXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlQXJyYXkgfSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy9kYXRhL29ic2VydmFibGUtYXJyYXlcIjtcbmltcG9ydCB7IGtub3duRm9sZGVycywgcGF0aCwgRmlsZSwgRm9sZGVyIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvZmlsZS1zeXN0ZW1cIjtcbmltcG9ydCB7IGZyb21SZXNvdXJjZSwgSW1hZ2VTb3VyY2UgfSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy9pbWFnZS1zb3VyY2VcIjtcbmltcG9ydCB7IFBhZ2UgfSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy91aS9wYWdlXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBvbk5hdmlnYXRpbmdUbyhhcmdzKSB7XG4gICAgY29uc3QgcGFnZTogUGFnZSA9IDxQYWdlPmFyZ3Mub2JqZWN0O1xuICAgIGNvbnN0IHZtID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICBjb25zdCBhcnJheSA9IG5ldyBPYnNlcnZhYmxlQXJyYXkoKTtcbiAgICBjb25zdCBmb2xkZXJOYW1lOiBzdHJpbmcgPSBcIk5hdGl2ZVNjcmlwdFwiO1xuICAgIGNvbnN0IGZpbGVOYW1lOiBzdHJpbmcgPSBcIlJFQURNRS50eHRcIjtcbiAgICBjb25zdCBmaWxlVGV4dENvbnRlbnQ6IHN0cmluZyA9IFwiQnVpbGQgYW1hemluZyBpT1MgYW5kIEFuZHJvaWQgYXBwcyB3aXRoIHRlY2hub2xvZ3kgeW91IGFscmVhZHkga25vd1wiICtcbiAgICAgICAgXCJPcGVuIHNvdXJjZSBmcmFtZXdvcmsgZm9yIGJ1aWxkaW5nIHRydWx5IG5hdGl2ZSBtb2JpbGUgYXBwc1wiICtcbiAgICAgICAgXCJ3aXRoIEFuZ3VsYXIsIFR5cGVTY3JpcHQgb3IgSmF2YVNjcmlwdC5cIjtcblxuICAgIGxldCBkb2N1bWVudHM6IEZvbGRlciA9IGtub3duRm9sZGVycy5kb2N1bWVudHMoKTtcbiAgICBjb25zdCBmb2xkZXI6IEZvbGRlciA9IGRvY3VtZW50cy5nZXRGb2xkZXIoZm9sZGVyTmFtZSk7XG4gICAgY29uc3QgZmlsZTogRmlsZSA9IGZvbGRlci5nZXRGaWxlKGZpbGVOYW1lKTtcblxuICAgIGZpbGUud3JpdGVUZXh0KGZpbGVUZXh0Q29udGVudClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gPj4gZnMtcmVhZC10ZXh0LWNvZGUtdHNcbiAgICAgICAgICAgIGZpbGUucmVhZFRleHQoKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdm0uc2V0KFwid3JpdHRlbkNvbnRlbnRcIiwgcmVzKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5zdGFjayk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyA8PCBmcy1yZWFkLXRleHQtY29kZS10c1xuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcblxuICAgIC8vID4+IGZzLWZvbGRlci1jb250ZW50LWNvZGUtdHNcbiAgICBkb2N1bWVudHMgPSBrbm93bkZvbGRlcnMuZG9jdW1lbnRzKCk7XG4gICAgZG9jdW1lbnRzLmdldEVudGl0aWVzKClcbiAgICAgICAgLnRoZW4oKGVudGl0aWVzKSA9PiB7XG4gICAgICAgICAgICAvLyBlbnRpdGllcyBpcyBhcnJheSB3aXRoIHRoZSBkb2N1bWVudCdzIGZpbGVzIGFuZCBmb2xkZXJzLlxuICAgICAgICAgICAgZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICAgICAgICAgICAgYXJyYXkucHVzaChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZW50aXR5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbnRpdHkucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmllZDogZW50aXR5Lmxhc3RNb2RpZmllZC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIC8vIEZhaWxlZCB0byBvYnRhaW4gZm9sZGVyJ3MgY29udGVudHMuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIuc3RhY2spO1xuICAgICAgICB9KTtcbiAgICAvLyA8PCBmcy1mb2xkZXItY29udGVudC1jb2RlLXRzXG4gICAgLy8gPj4gZnMtZmlsZS1leGlzdHMtY2hlY2stY29kZS10c1xuICAgIGRvY3VtZW50cyA9IGtub3duRm9sZGVycy5kb2N1bWVudHMoKTtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihkb2N1bWVudHMucGF0aCwgXCJUZXh0LnR4dFwiKTtcbiAgICBjb25zdCBleGlzdHMgPSBGaWxlLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgY29uc29sZS5sb2coYERvZXMgVGV4dC50eHQgZXhpc3RzOiAke2V4aXN0c31gKTtcbiAgICAvLyA8PCBmcy1maWxlLWV4aXN0cy1jaGVjay1jb2RlLXRzXG4gICAgLy8gPj4gZnMtZm9sZGVyLWV4aXN0cy1jaGVjay1jb2RlLXRzXG4gICAgY29uc3QgdGVtcDogRm9sZGVyID0gPEZvbGRlcj5rbm93bkZvbGRlcnMudGVtcCgpO1xuICAgIGNvbnN0IHRlbXBFeGlzdHM6IGJvb2xlYW4gPSBGb2xkZXIuZXhpc3RzKHRlbXAucGF0aCk7XG4gICAgY29uc29sZS5sb2coYERvZXMgdGVtcCBmb2xkZXIgZXhpc3RzOiAke3RlbXBFeGlzdHN9YCk7XG4gICAgLy8gPDwgZnMtZm9sZGVyLWV4aXN0cy1jaGVjay1jb2RlLXRzXG5cbiAgICB2bS5zZXQoXCJmaWxlUGF0aFwiLCBmaWxlLnBhdGgpO1xuICAgIHZtLnNldChcImZvbGRlckVudGl0aWVzXCIsIGFycmF5KTtcbiAgICB2bS5zZXQoXCJiaW5hcnlTb3VyY2VcIiwgXCJcIik7XG5cbiAgICBwYWdlLmJpbmRpbmdDb250ZXh0ID0gdm07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvblJlYWRTeW5jKGFyZ3MpIHtcbiAgICBjb25zdCBwYWdlOiBQYWdlID0gPFBhZ2U+YXJncy5vYmplY3QucGFnZTtcbiAgICBjb25zdCB2bSA9IHBhZ2UuYmluZGluZ0NvbnRleHQ7XG4gICAgLy8gPj4gZnMtcmVhZC1zeW5jLWNvZGUtdHNcbiAgICBjb25zdCBpbWFnZTogSW1hZ2VTb3VyY2UgPSBmcm9tUmVzb3VyY2UoXCJpY29uXCIpO1xuICAgIGNvbnN0IGZvbGRlcjogRm9sZGVyID0ga25vd25Gb2xkZXJzLmRvY3VtZW50cygpO1xuICAgIGNvbnN0IGZpbGVQYXRoOiBzdHJpbmcgPSBwYXRoLmpvaW4oZm9sZGVyLnBhdGgsIFwiVGVzdC5wbmdcIik7XG4gICAgY29uc3Qgc2F2ZWQgPSBpbWFnZS5zYXZlVG9GaWxlKGZpbGVQYXRoLCBcInBuZ1wiKTtcblxuICAgIGlmIChzYXZlZCkge1xuICAgICAgICBjb25zdCBpbWFnZUZpbGU6IEZpbGUgPSBGaWxlLmZyb21QYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgY29uc3QgYmluYXJ5U291cmNlID0gaW1hZ2VGaWxlLnJlYWRTeW5jKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmJpbmFyeVNvdXJjZSk7XG4gICAgICAgIC8vIDw8IGZzLXJlYWQtc3luYy1jb2RlLXRzXG4gICAgICAgIC8vID4+IGZzLXdyaXRlLXN5bmMtY29kZS10c1xuICAgICAgICBpbWFnZUZpbGUud3JpdGVTeW5jKGJpbmFyeVNvdXJjZSwgKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIDw8IGZzLXdyaXRlLXN5bmMtY29kZS10c1xuICAgICAgICB2bS5zZXQoXCJiaW5hcnlTb3VyY2VcIiwgYFN1Y2Nlc3NmdWxseSByZWFkIGJpbmFyeSBkYXRhOiAke2JpbmFyeVNvdXJjZX1gKTtcbiAgICB9XG59XG4iXX0=