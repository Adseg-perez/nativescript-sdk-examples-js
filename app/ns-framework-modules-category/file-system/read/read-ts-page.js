"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var observable_1 = require("tns-core-modules/data/observable");
var observable_array_1 = require("tns-core-modules/data/observable-array");
var file_system_1 = require("tns-core-modules/file-system");
var image_source_1 = require("tns-core-modules/image-source");
function onNavigatingTo(args) {
    var page = args.object;
    var vm = new observable_1.Observable();
    var array = new observable_array_1.ObservableArray();
    var folderName = "NativeScript";
    var fileName = "README.txt";
    var fileTextContent = "Build amazing iOS and Android apps with technology you already know" +
        "Open source framework for building truly native mobile apps" +
        "with Angular, TypeScript or JavaScript.";
    var documents = file_system_1.knownFolders.documents();
    var folder = documents.getFolder(folderName);
    var file = folder.getFile(fileName);
    file.writeText(fileTextContent)
        .then(function () {
        file.readText()
            .then(function (res) {
            vm.set("writtenContent", res);
        }).catch(function (err) {
            console.log(err.stack);
        });
    }).catch(function (err) {
        console.log(err);
    });
    documents = file_system_1.knownFolders.documents();
    documents.getEntities()
        .then(function (entities) {
        entities.forEach(function (entity) {
            array.push({
                name: entity.name,
                path: entity.path,
                lastModified: entity.lastModified.toString()
            });
        });
    }).catch(function (err) {
        console.log(err.stack);
    });
    documents = file_system_1.knownFolders.documents();
    var filePath = file_system_1.path.join(documents.path, "Text.txt");
    var exists = file_system_1.File.exists(filePath);
    console.log("Does Text.txt exists: " + exists);
    var temp = file_system_1.knownFolders.temp();
    var tempExists = file_system_1.Folder.exists(temp.path);
    console.log("Does temp folder exists: " + tempExists);
    vm.set("filePath", file.path);
    vm.set("folderEntities", array);
    vm.set("binarySource", "");
    page.bindingContext = vm;
}
exports.onNavigatingTo = onNavigatingTo;
function onReadSync(args) {
    var page = args.object.page;
    var vm = page.bindingContext;
    var image = image_source_1.fromResource("icon");
    var folder = file_system_1.knownFolders.documents();
    var filePath = file_system_1.path.join(folder.path, "Test.png");
    var saved = image.saveToFile(filePath, "png");
    if (saved) {
        var imageFile = file_system_1.File.fromPath(filePath);
        var binarySource = imageFile.readSync(function (err) {
            console.log(err);
        });
        console.log(this.binarySource);
        imageFile.writeSync(binarySource, function (err) {
            console.log(err);
        });
        vm.set("binarySource", "Successfully read binary data: " + binarySource);
    }
}
exports.onReadSync = onReadSync;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhZC10cy1wYWdlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmVhZC10cy1wYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0RBQTREO0FBQzVELDJFQUF1RTtBQUN2RSw0REFBOEU7QUFDOUUsOERBQXdFO0FBR3hFLHdCQUErQixJQUFJO0lBQy9CLElBQU0sSUFBSSxHQUFnQixJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3RDLElBQU0sRUFBRSxHQUFHLElBQUksdUJBQVUsRUFBRSxDQUFDO0lBQzVCLElBQU0sS0FBSyxHQUFHLElBQUksa0NBQWUsRUFBRSxDQUFDO0lBQ3BDLElBQU0sVUFBVSxHQUFXLGNBQWMsQ0FBQztJQUMxQyxJQUFNLFFBQVEsR0FBVyxZQUFZLENBQUM7SUFDdEMsSUFBTSxlQUFlLEdBQVcscUVBQXFFO1FBQ2pHLDZEQUE2RDtRQUM3RCx5Q0FBeUMsQ0FBQztJQUU5QyxJQUFJLFNBQVMsR0FBVywwQkFBWSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ2pELElBQU0sTUFBTSxHQUFVLFNBQVMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDdEQsSUFBTSxJQUFJLEdBQVMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUU1QyxJQUFJLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQztTQUMxQixJQUFJLENBQUM7UUFFRixJQUFJLENBQUMsUUFBUSxFQUFFO2FBQ1YsSUFBSSxDQUFDLFVBQUMsR0FBRztZQUNOLEVBQUUsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDbEMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQUMsR0FBRztZQUNULE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzNCLENBQUMsQ0FBQyxDQUFDO0lBRVgsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQUMsR0FBRztRQUNULE9BQU8s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QUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsb0NBQWtDLFlBQWMsQ0FBQyxDQUFDO0lBQzdFLENBQUM7QUFDTCxDQUFDO0FBdkJELGdDQXVCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvZGF0YS9vYnNlcnZhYmxlXCI7XHJcbmltcG9ydCB7T2JzZXJ2YWJsZUFycmF5fSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy9kYXRhL29ic2VydmFibGUtYXJyYXlcIjtcclxuaW1wb3J0IHtrbm93bkZvbGRlcnMsIHBhdGgsIEZpbGUsIEZvbGRlcn0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvZmlsZS1zeXN0ZW1cIjtcclxuaW1wb3J0IHtmcm9tUmVzb3VyY2UsIEltYWdlU291cmNlfSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy9pbWFnZS1zb3VyY2VcIjtcclxuaW1wb3J0IHsgUGFnZSB9IGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL3VpL3BhZ2VcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvbk5hdmlnYXRpbmdUbyhhcmdzKSB7XHJcbiAgICBjb25zdCBwYWdlOiBQYWdlID0gPFBhZ2U+IGFyZ3Mub2JqZWN0O1xyXG4gICAgY29uc3Qgdm0gPSBuZXcgT2JzZXJ2YWJsZSgpO1xyXG4gICAgY29uc3QgYXJyYXkgPSBuZXcgT2JzZXJ2YWJsZUFycmF5KCk7XHJcbiAgICBjb25zdCBmb2xkZXJOYW1lOiBzdHJpbmcgPSBcIk5hdGl2ZVNjcmlwdFwiO1xyXG4gICAgY29uc3QgZmlsZU5hbWU6IHN0cmluZyA9IFwiUkVBRE1FLnR4dFwiO1xyXG4gICAgY29uc3QgZmlsZVRleHRDb250ZW50OiBzdHJpbmcgPSBcIkJ1aWxkIGFtYXppbmcgaU9TIGFuZCBBbmRyb2lkIGFwcHMgd2l0aCB0ZWNobm9sb2d5IHlvdSBhbHJlYWR5IGtub3dcIiArXHJcbiAgICAgICAgXCJPcGVuIHNvdXJjZSBmcmFtZXdvcmsgZm9yIGJ1aWxkaW5nIHRydWx5IG5hdGl2ZSBtb2JpbGUgYXBwc1wiICtcclxuICAgICAgICBcIndpdGggQW5ndWxhciwgVHlwZVNjcmlwdCBvciBKYXZhU2NyaXB0LlwiO1xyXG5cclxuICAgIGxldCBkb2N1bWVudHM6IEZvbGRlciA9IGtub3duRm9sZGVycy5kb2N1bWVudHMoKTtcclxuICAgIGNvbnN0IGZvbGRlcjpGb2xkZXIgPSBkb2N1bWVudHMuZ2V0Rm9sZGVyKGZvbGRlck5hbWUpO1xyXG4gICAgY29uc3QgZmlsZTogRmlsZSA9IGZvbGRlci5nZXRGaWxlKGZpbGVOYW1lKTtcclxuXHJcbiAgICBmaWxlLndyaXRlVGV4dChmaWxlVGV4dENvbnRlbnQpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyA+PiBmcy1yZWFkLXRleHQtY29kZS10c1xyXG4gICAgICAgICAgICBmaWxlLnJlYWRUZXh0KClcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5zZXQoXCJ3cml0dGVuQ29udGVudFwiLCByZXMpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5zdGFjayk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gPDwgZnMtcmVhZC10ZXh0LWNvZGUtdHNcclxuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gPj4gZnMtZm9sZGVyLWNvbnRlbnQtY29kZS10c1xyXG4gICAgZG9jdW1lbnRzID0ga25vd25Gb2xkZXJzLmRvY3VtZW50cygpO1xyXG4gICAgZG9jdW1lbnRzLmdldEVudGl0aWVzKClcclxuICAgICAgICAudGhlbigoZW50aXRpZXMpID0+IHtcclxuICAgICAgICAgICAgLy8gZW50aXRpZXMgaXMgYXJyYXkgd2l0aCB0aGUgZG9jdW1lbnQncyBmaWxlcyBhbmQgZm9sZGVycy5cclxuICAgICAgICAgICAgZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhcnJheS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZW50aXR5Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGVudGl0eS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IGVudGl0eS5sYXN0TW9kaWZpZWQudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgLy8gRmFpbGVkIHRvIG9idGFpbiBmb2xkZXIncyBjb250ZW50cy5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLnN0YWNrKTtcclxuICAgICAgICB9KTtcclxuICAgIC8vIDw8IGZzLWZvbGRlci1jb250ZW50LWNvZGUtdHNcclxuICAgIC8vID4+IGZzLWZpbGUtZXhpc3RzLWNoZWNrLWNvZGUtdHNcclxuICAgIGRvY3VtZW50cyA9IGtub3duRm9sZGVycy5kb2N1bWVudHMoKTtcclxuICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKGRvY3VtZW50cy5wYXRoLCBcIlRleHQudHh0XCIpO1xyXG4gICAgY29uc3QgZXhpc3RzID0gRmlsZS5leGlzdHMoZmlsZVBhdGgpO1xyXG4gICAgY29uc29sZS5sb2coYERvZXMgVGV4dC50eHQgZXhpc3RzOiAke2V4aXN0c31gKTtcclxuICAgIC8vIDw8IGZzLWZpbGUtZXhpc3RzLWNoZWNrLWNvZGUtdHNcclxuICAgIC8vID4+IGZzLWZvbGRlci1leGlzdHMtY2hlY2stY29kZS10c1xyXG4gICAgY29uc3QgdGVtcDogRm9sZGVyID0gPEZvbGRlcj4ga25vd25Gb2xkZXJzLnRlbXAoKTtcclxuICAgIGNvbnN0IHRlbXBFeGlzdHM6IGJvb2xlYW4gPSBGb2xkZXIuZXhpc3RzKHRlbXAucGF0aCk7XHJcbiAgICBjb25zb2xlLmxvZyhgRG9lcyB0ZW1wIGZvbGRlciBleGlzdHM6ICR7dGVtcEV4aXN0c31gKTtcclxuICAgIC8vIDw8IGZzLWZvbGRlci1leGlzdHMtY2hlY2stY29kZS10c1xyXG5cclxuICAgIHZtLnNldChcImZpbGVQYXRoXCIsIGZpbGUucGF0aCk7XHJcbiAgICB2bS5zZXQoXCJmb2xkZXJFbnRpdGllc1wiLCBhcnJheSk7XHJcbiAgICB2bS5zZXQoXCJiaW5hcnlTb3VyY2VcIiwgXCJcIik7XHJcblxyXG4gICAgcGFnZS5iaW5kaW5nQ29udGV4dCA9IHZtO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gb25SZWFkU3luYyhhcmdzKSB7XHJcbiAgICBjb25zdCBwYWdlOiBQYWdlID0gPFBhZ2U+IGFyZ3Mub2JqZWN0LnBhZ2U7XHJcbiAgICBjb25zdCB2bSA9IHBhZ2UuYmluZGluZ0NvbnRleHQ7XHJcbiAgICAvLyA+PiBmcy1yZWFkLXN5bmMtY29kZS10c1xyXG4gICAgY29uc3QgaW1hZ2U6IEltYWdlU291cmNlID0gZnJvbVJlc291cmNlKFwiaWNvblwiKTtcclxuICAgIGNvbnN0IGZvbGRlcjogRm9sZGVyID0ga25vd25Gb2xkZXJzLmRvY3VtZW50cygpO1xyXG4gICAgY29uc3QgZmlsZVBhdGg6IHN0cmluZyA9IHBhdGguam9pbihmb2xkZXIucGF0aCwgXCJUZXN0LnBuZ1wiKTtcclxuICAgIGNvbnN0IHNhdmVkID0gaW1hZ2Uuc2F2ZVRvRmlsZShmaWxlUGF0aCwgXCJwbmdcIik7XHJcblxyXG4gICAgaWYgKHNhdmVkKSB7XHJcbiAgICAgICAgY29uc3QgaW1hZ2VGaWxlOiBGaWxlID0gRmlsZS5mcm9tUGF0aChmaWxlUGF0aCk7XHJcbiAgICAgICAgY29uc3QgYmluYXJ5U291cmNlID0gaW1hZ2VGaWxlLnJlYWRTeW5jKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmJpbmFyeVNvdXJjZSk7XHJcbiAgICAgICAgLy8gPDwgZnMtcmVhZC1zeW5jLWNvZGUtdHNcclxuICAgICAgICAvLyA+PiBmcy13cml0ZS1zeW5jLWNvZGUtdHNcclxuICAgICAgICBpbWFnZUZpbGUud3JpdGVTeW5jKGJpbmFyeVNvdXJjZSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIDw8IGZzLXdyaXRlLXN5bmMtY29kZS10c1xyXG4gICAgICAgIHZtLnNldChcImJpbmFyeVNvdXJjZVwiLCBgU3VjY2Vzc2Z1bGx5IHJlYWQgYmluYXJ5IGRhdGE6ICR7YmluYXJ5U291cmNlfWApO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==