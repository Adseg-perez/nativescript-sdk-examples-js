"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var observable_1 = require("tns-core-modules/data/observable");
var application_settings_1 = require("application-settings");
var fps_meter_1 = require("tns-core-modules/fps-meter");
var callbackId;
function onNavigatingTo(args) {
    var page = args.object;
    var vm = new observable_1.Observable();
    vm.set("fps", "0");
    vm.set("minfps", "0");
    vm.set("fpslabeltitle", "Start FPS Meter");
    application_settings_1.setBoolean("status", false);
    page.bindingContext = vm;
}
exports.onNavigatingTo = onNavigatingTo;
function toogleMeter(args) {
    var page = args.object.page;
    var vm = page.bindingContext;
    var status = application_settings_1.getBoolean("status");
    if (status) {
        fps_meter_1.removeCallback(callbackId);
        fps_meter_1.stop();
        vm.set("fpslabeltitle", "Start FPS Meter");
    }
    else {
        callbackId = fps_meter_1.addCallback(function (fps, minFps) {
            vm.set("fps", fps.toFixed(2));
            vm.set("minfps", minFps.toFixed(2));
        });
        fps_meter_1.start();
        vm.set("fpslabeltitle", "Stop FPS Meter");
    }
    application_settings_1.setBoolean("status", !status);
}
exports.toogleMeter = toogleMeter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWNzLXRzLXBhZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJiYXNpY3MtdHMtcGFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLCtEQUE0RDtBQUM1RCw2REFBNEQ7QUFHNUQsd0RBQW9GO0FBR3BGLElBQUksVUFBVSxDQUFDO0FBQ2Ysd0JBQStCLElBQUk7SUFDL0IsSUFBTSxJQUFJLEdBQWdCLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDdEMsSUFBTSxFQUFFLEdBQUcsSUFBSSx1QkFBVSxFQUFFLENBQUM7SUFDNUIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDbkIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDdEIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUMzQyxpQ0FBVSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUM1QixJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztBQUM3QixDQUFDO0FBUkQsd0NBUUM7QUFHRCxxQkFBNEIsSUFBSTtJQUM1QixJQUFNLElBQUksR0FBZ0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFDM0MsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztJQUMvQixJQUFNLE1BQU0sR0FBWSxpQ0FBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzdDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFFVCwwQkFBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzNCLGdCQUFJLEVBQUUsQ0FBQztRQUVQLEVBQUUsQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBRUosVUFBVSxHQUFHLHVCQUFXLENBQUMsVUFBQyxHQUFHLEVBQUUsTUFBTTtZQUM3QixFQUFFLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVDLENBQUMsQ0FBQyxDQUFDO1FBRUgsaUJBQUssRUFBRSxDQUFDO1FBRVIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBQ0QsaUNBQVUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNsQyxDQUFDO0FBdEJELGtDQXNCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvZGF0YS9vYnNlcnZhYmxlXCI7XHJcbmltcG9ydCB7c2V0Qm9vbGVhbiwgZ2V0Qm9vbGVhbn0gZnJvbSBcImFwcGxpY2F0aW9uLXNldHRpbmdzXCI7XHJcbmltcG9ydCB7UGFnZX0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvdWkvcGFnZVwiO1xyXG4vLyA+PiBpbXBvcnQtZnBzLW1ldGVyXHJcbmltcG9ydCB7cmVtb3ZlQ2FsbGJhY2ssIHN0YXJ0LCBzdG9wLCBhZGRDYWxsYmFja30gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvZnBzLW1ldGVyXCI7XHJcbi8vIDw8IGltcG9ydC1mcHMtbWV0ZXJcclxuXHJcbmxldCBjYWxsYmFja0lkO1xyXG5leHBvcnQgZnVuY3Rpb24gb25OYXZpZ2F0aW5nVG8oYXJncykge1xyXG4gICAgY29uc3QgcGFnZTogUGFnZSA9IDxQYWdlPiBhcmdzLm9iamVjdDtcclxuICAgIGNvbnN0IHZtID0gbmV3IE9ic2VydmFibGUoKTtcclxuICAgIHZtLnNldChcImZwc1wiLCBcIjBcIik7XHJcbiAgICB2bS5zZXQoXCJtaW5mcHNcIiwgXCIwXCIpO1xyXG4gICAgdm0uc2V0KFwiZnBzbGFiZWx0aXRsZVwiLCBcIlN0YXJ0IEZQUyBNZXRlclwiKTtcclxuICAgIHNldEJvb2xlYW4oXCJzdGF0dXNcIiwgZmFsc2UpO1xyXG4gICAgcGFnZS5iaW5kaW5nQ29udGV4dCA9IHZtO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvb2dsZU1ldGVyKGFyZ3MpIHtcclxuICAgIGNvbnN0IHBhZ2U6IFBhZ2UgPSA8UGFnZT4gYXJncy5vYmplY3QucGFnZTtcclxuICAgIGNvbnN0IHZtID0gcGFnZS5iaW5kaW5nQ29udGV4dDtcclxuICAgIGNvbnN0IHN0YXR1czogYm9vbGVhbiA9IGdldEJvb2xlYW4oXCJzdGF0dXNcIik7XHJcbiAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgICAgLy8gPj4gc3RvcC1mcHMtbWV0ZXItdHNcclxuICAgICAgICByZW1vdmVDYWxsYmFjayhjYWxsYmFja0lkKTtcclxuICAgICAgICBzdG9wKCk7XHJcbiAgICAgICAgLy8gPDwgc3RvcC1mcHMtbWV0ZXItdHNcclxuICAgICAgICB2bS5zZXQoXCJmcHNsYWJlbHRpdGxlXCIsIFwiU3RhcnQgRlBTIE1ldGVyXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyA+PiBzdGFydC1mcHMtbWV0ZXItdHNcclxuICAgICAgICBjYWxsYmFja0lkID0gYWRkQ2FsbGJhY2soKGZwcywgbWluRnBzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2bS5zZXQoXCJmcHNcIiwgZnBzLnRvRml4ZWQoMikpO1xyXG4gICAgICAgICAgICAgICAgdm0uc2V0KFwibWluZnBzXCIsIG1pbkZwcy50b0ZpeGVkKDIpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc3RhcnQoKTtcclxuICAgICAgICAvLyA8PCBzdGFydC1mcHMtbWV0ZXItdHNcclxuICAgICAgICB2bS5zZXQoXCJmcHNsYWJlbHRpdGxlXCIsIFwiU3RvcCBGUFMgTWV0ZXJcIik7XHJcbiAgICB9XHJcbiAgICBzZXRCb29sZWFuKFwic3RhdHVzXCIsICFzdGF0dXMpO1xyXG59XHJcbiJdfQ==