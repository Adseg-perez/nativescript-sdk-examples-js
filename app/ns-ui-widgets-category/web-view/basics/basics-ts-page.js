"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var observable_1 = require("tns-core-modules/data/observable");
var dialogs = require("tns-core-modules/ui/dialogs");
var web_view_1 = require("tns-core-modules/ui/web-view");
function onNavigatingTo(args) {
    var page = args.object;
    var vm = new observable_1.Observable();
    vm.set("webViewSrc", "https://docs.nativescript.org/");
    vm.set("result", "");
    vm.set("tftext", "https://docs.nativescript.org/");
    page.bindingContext = vm;
}
exports.onNavigatingTo = onNavigatingTo;
function onWebViewLoaded(webargs) {
    var page = webargs.object.page;
    var vm = page.bindingContext;
    var webview = webargs.object;
    vm.set("result", "WebView is still loading...");
    vm.set("enabled", false);
    webview.on(web_view_1.WebView.loadFinishedEvent, function (args) {
        var message = "";
        if (!args.error) {
            message = "WebView finished loading of " + args.url;
        }
        else {
            message = "Error loading " + args.url + " : " + args.error;
        }
        vm.set("result", message);
        console.log("WebView message - " + message);
    });
}
exports.onWebViewLoaded = onWebViewLoaded;
function goBack(args) {
    var page = args.object.page;
    var vm = page.bindingContext;
    var webview = page.getViewById("myWebView");
    if (webview.canGoBack) {
        webview.goBack();
        vm.set("enabled", true);
    }
}
exports.goBack = goBack;
function goForward(args) {
    var page = args.object.page;
    var vm = page.bindingContext;
    var webview = page.getViewById("myWebView");
    if (webview.canGoForward) {
        webview.goForward();
    }
    else {
        vm.set("enabled", false);
    }
}
exports.goForward = goForward;
function submit(args) {
    var page = args.object.page;
    var vm = page.bindingContext;
    var textField = args.object;
    var text = textField.text;
    vm.set("enabled", false);
    if (text.substring(0, 4) === "http") {
        vm.set("webViewSrc", text);
        textField.dismissSoftInput();
    }
    else {
        dialogs.alert("Please, add `http://` or `https://` in front of the URL string")
            .then(function () {
            console.log("Dialog closed!");
        });
    }
}
exports.submit = submit;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWNzLXRzLXBhZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJiYXNpY3MtdHMtcGFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLCtEQUE0RDtBQUM1RCxxREFBdUQ7QUFDdkQseURBQW9FO0FBSXBFLHdCQUErQixJQUFJO0lBQy9CLElBQU0sSUFBSSxHQUFnQixJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3RDLElBQU0sRUFBRSxHQUFHLElBQUksdUJBQVUsRUFBRSxDQUFDO0lBQzVCLEVBQUUsQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLGdDQUFnQyxDQUFDLENBQUM7SUFDdkQsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDckIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsZ0NBQWdDLENBQUMsQ0FBQztJQUNuRCxJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztBQUM3QixDQUFDO0FBUEQsd0NBT0M7QUFFRCx5QkFBZ0MsT0FBTztJQUNuQyxJQUFNLElBQUksR0FBZ0IsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFDOUMsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztJQUMvQixJQUFNLE9BQU8sR0FBc0IsT0FBTyxDQUFDLE1BQU0sQ0FBQztJQUNsRCxFQUFFLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSw2QkFBNkIsQ0FBQyxDQUFDO0lBQ2hELEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBRXpCLE9BQU8sQ0FBQyxFQUFFLENBQUMsa0JBQU8sQ0FBQyxpQkFBaUIsRUFBRSxVQUFDLElBQW1CO1FBQ3RELElBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQztRQUNqQixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ2QsT0FBTyxHQUFHLGlDQUErQixJQUFJLENBQUMsR0FBSyxDQUFDO1FBQ3hELENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLE9BQU8sR0FBRyxtQkFBaUIsSUFBSSxDQUFDLEdBQUcsV0FBTSxJQUFJLENBQUMsS0FBTyxDQUFDO1FBQzFELENBQUM7UUFFRCxFQUFFLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUMxQixPQUFPLENBQUMsR0FBRyxDQUFDLHVCQUFxQixPQUFTLENBQUMsQ0FBQztJQUNoRCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFsQkQsMENBa0JDO0FBRUQsZ0JBQXVCLElBQUk7SUFDdkIsSUFBTSxJQUFJLEdBQWdCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQzNDLElBQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDL0IsSUFBTSxPQUFPLEdBQXNCLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDakUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDcEIsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2pCLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzVCLENBQUM7QUFDTCxDQUFDO0FBUkQsd0JBUUM7QUFFRCxtQkFBMEIsSUFBSTtJQUMxQixJQUFNLElBQUksR0FBZ0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFDM0MsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztJQUMvQixJQUFNLE9BQU8sR0FBc0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNqRSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztRQUN2QixPQUFPLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ0osRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDN0IsQ0FBQztBQUNMLENBQUM7QUFURCw4QkFTQztBQUVELGdCQUF1QixJQUFJO0lBQ3ZCLElBQU0sSUFBSSxHQUFnQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztJQUMzQyxJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQy9CLElBQU0sU0FBUyxHQUEwQixJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JELElBQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUM7SUFDNUIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDekIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNsQyxFQUFFLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQztRQUMzQixTQUFTLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUNqQyxDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDSixPQUFPLENBQUMsS0FBSyxDQUFDLGdFQUFnRSxDQUFDO2FBQzlFLElBQUksQ0FBQztZQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUNsQyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7QUFDTCxDQUFDO0FBZkQsd0JBZUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA+PiBzZXR0aW5nLXVybC13ZWJ2aWV3LXRzXG5pbXBvcnQge09ic2VydmFibGV9IGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL2RhdGEvb2JzZXJ2YWJsZVwiO1xuaW1wb3J0ICogYXMgZGlhbG9ncyBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy91aS9kaWFsb2dzXCI7XG5pbXBvcnQge1dlYlZpZXcsIExvYWRFdmVudERhdGF9IGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL3VpL3dlYi12aWV3XCI7XG5pbXBvcnQgeyBQYWdlIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvdWkvcGFnZVwiO1xuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvdWkvdGV4dC1maWVsZFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gb25OYXZpZ2F0aW5nVG8oYXJncykge1xuICAgIGNvbnN0IHBhZ2U6IFBhZ2UgPSA8UGFnZT4gYXJncy5vYmplY3Q7XG4gICAgY29uc3Qgdm0gPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgIHZtLnNldChcIndlYlZpZXdTcmNcIiwgXCJodHRwczovL2RvY3MubmF0aXZlc2NyaXB0Lm9yZy9cIik7XG4gICAgdm0uc2V0KFwicmVzdWx0XCIsIFwiXCIpO1xuICAgIHZtLnNldChcInRmdGV4dFwiLCBcImh0dHBzOi8vZG9jcy5uYXRpdmVzY3JpcHQub3JnL1wiKTtcbiAgICBwYWdlLmJpbmRpbmdDb250ZXh0ID0gdm07XG59XG4vLyBoYW5kbGluZyBXZWJWaWV3IGxvYWQgZmluaXNoIGV2ZW50XG5leHBvcnQgZnVuY3Rpb24gb25XZWJWaWV3TG9hZGVkKHdlYmFyZ3MpIHtcbiAgICBjb25zdCBwYWdlOiBQYWdlID0gPFBhZ2U+IHdlYmFyZ3Mub2JqZWN0LnBhZ2U7XG4gICAgY29uc3Qgdm0gPSBwYWdlLmJpbmRpbmdDb250ZXh0O1xuICAgIGNvbnN0IHdlYnZpZXc6IFdlYlZpZXcgPSA8V2ViVmlldz4gd2ViYXJncy5vYmplY3Q7XG4gICAgdm0uc2V0KFwicmVzdWx0XCIsIFwiV2ViVmlldyBpcyBzdGlsbCBsb2FkaW5nLi4uXCIpO1xuICAgIHZtLnNldChcImVuYWJsZWRcIiwgZmFsc2UpO1xuXG4gICAgd2Vidmlldy5vbihXZWJWaWV3LmxvYWRGaW5pc2hlZEV2ZW50LCAoYXJnczogTG9hZEV2ZW50RGF0YSkgPT4ge1xuICAgICAgICBsZXQgbWVzc2FnZSA9IFwiXCI7XG4gICAgICAgIGlmICghYXJncy5lcnJvcikge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGBXZWJWaWV3IGZpbmlzaGVkIGxvYWRpbmcgb2YgJHthcmdzLnVybH1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGBFcnJvciBsb2FkaW5nICR7YXJncy51cmx9IDogJHthcmdzLmVycm9yfWA7XG4gICAgICAgIH1cblxuICAgICAgICB2bS5zZXQoXCJyZXN1bHRcIiwgbWVzc2FnZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBXZWJWaWV3IG1lc3NhZ2UgLSAke21lc3NhZ2V9YCk7XG4gICAgfSk7XG59XG4vLyBnb2luZyB0byB0aGUgcHJldmlvdXMgcGFnZSBpZiBzdWNoIGlzIGF2YWlsYWJsZVxuZXhwb3J0IGZ1bmN0aW9uIGdvQmFjayhhcmdzKSB7XG4gICAgY29uc3QgcGFnZTogUGFnZSA9IDxQYWdlPiBhcmdzLm9iamVjdC5wYWdlO1xuICAgIGNvbnN0IHZtID0gcGFnZS5iaW5kaW5nQ29udGV4dDtcbiAgICBjb25zdCB3ZWJ2aWV3OiBXZWJWaWV3ID0gPFdlYlZpZXc+IHBhZ2UuZ2V0Vmlld0J5SWQoXCJteVdlYlZpZXdcIik7XG4gICAgaWYgKHdlYnZpZXcuY2FuR29CYWNrKSB7XG4gICAgICAgIHdlYnZpZXcuZ29CYWNrKCk7XG4gICAgICAgIHZtLnNldChcImVuYWJsZWRcIiwgdHJ1ZSk7XG4gICAgfVxufVxuLy8gZ29pbmcgZm9yd2FyZCBpZiBhIHBhZ2UgaXMgYXZhaWxhYmxlXG5leHBvcnQgZnVuY3Rpb24gZ29Gb3J3YXJkKGFyZ3MpIHtcbiAgICBjb25zdCBwYWdlOiBQYWdlID0gPFBhZ2U+IGFyZ3Mub2JqZWN0LnBhZ2U7XG4gICAgY29uc3Qgdm0gPSBwYWdlLmJpbmRpbmdDb250ZXh0O1xuICAgIGNvbnN0IHdlYnZpZXc6IFdlYlZpZXcgPSA8V2ViVmlldz4gcGFnZS5nZXRWaWV3QnlJZChcIm15V2ViVmlld1wiKTtcbiAgICBpZiAod2Vidmlldy5jYW5Hb0ZvcndhcmQpIHtcbiAgICAgICAgd2Vidmlldy5nb0ZvcndhcmQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2bS5zZXQoXCJlbmFibGVkXCIsIGZhbHNlKTtcbiAgICB9XG59XG4vLyBjaGFuZ2luZyBXZWJWaWV3IHNvdXJjZVxuZXhwb3J0IGZ1bmN0aW9uIHN1Ym1pdChhcmdzKSB7XG4gICAgY29uc3QgcGFnZTogUGFnZSA9IDxQYWdlPiBhcmdzLm9iamVjdC5wYWdlO1xuICAgIGNvbnN0IHZtID0gcGFnZS5iaW5kaW5nQ29udGV4dDtcbiAgICBjb25zdCB0ZXh0RmllbGQ6IFRleHRGaWVsZCA9IDxUZXh0RmllbGQ+IGFyZ3Mub2JqZWN0O1xuICAgIGNvbnN0IHRleHQgPSB0ZXh0RmllbGQudGV4dDtcbiAgICB2bS5zZXQoXCJlbmFibGVkXCIsIGZhbHNlKTtcbiAgICBpZiAodGV4dC5zdWJzdHJpbmcoMCwgNCkgPT09IFwiaHR0cFwiKSB7XG4gICAgICAgIHZtLnNldChcIndlYlZpZXdTcmNcIiwgdGV4dCk7XG4gICAgICAgIHRleHRGaWVsZC5kaXNtaXNzU29mdElucHV0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGlhbG9ncy5hbGVydChcIlBsZWFzZSwgYWRkIGBodHRwOi8vYCBvciBgaHR0cHM6Ly9gIGluIGZyb250IG9mIHRoZSBVUkwgc3RyaW5nXCIpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGlhbG9nIGNsb3NlZCFcIik7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIDw8IHNldHRpbmctdXJsLXdlYnZpZXctdHNcbiJdfQ==